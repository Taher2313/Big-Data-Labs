# Install the arules package
# install.packages("arules")

# Install the arulesViz package
# install.packages("arulesViz")

#########################################################################
################################### 1 ###################################
#########################################################################

# First of all, start by cleaning the workspace and setting the working directory.
rm(list=ls())

# set working directory
setwd("/Users/taher/Desktop/Second Semester/Big Data/Assignments/Assignment 4")

#########################################################################
################################### 2 ###################################
#########################################################################

library("arules")
library("arulesViz")

#########################################################################
################################### 3 ###################################
#########################################################################

transactions = read.transactions("AssociationRules.csv", header=FALSE)

#########################################################################
################################### 4 ###################################
#########################################################################

inspect(head(transactions, n=100L))

#########################################################################
################################### 5 ###################################
#########################################################################

summary(transactions)

# most frequent items are:
# 1-item13: 4948 
# 2-item5: 3699


#########################################################################
################################### 6 ###################################
#########################################################################

itemFrequencyPlot(transactions, topN=5)

#########################################################################
################################### 7 ###################################
#########################################################################

association_rules <- apriori(transactions, parameter = list(supp = 0.01, conf = 0.5, minlen=2))

#########################################################################
################################### 8 ###################################
#########################################################################

sorted_rules1 = sort(association_rules, descreasing=TRUE, by="support")
inspect(head(sorted_rules1, 6))

#########################################################################
################################### 9 ###################################
#########################################################################

sorted_rules2 = sort(association_rules, descreasing=TRUE, by="confidence")
inspect(head(sorted_rules2, 6))

#########################################################################
################################### 10 ##################################
#########################################################################

sorted_rules3 = sort(association_rules, descreasing=TRUE, by="lift")
inspect(head(sorted_rules3, 6))

#########################################################################
################################### 11 ##################################
#########################################################################

plot(association_rules, measure = c("support", "confidence"), shading = "lift")


#########################################################################
################################### 12 ##################################
#########################################################################
